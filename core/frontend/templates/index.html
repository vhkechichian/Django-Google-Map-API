{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <!--
    <link rel="shortcut icon" href="favicon.ico">
    -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Demo de Google Maps</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.min.css' %}" >

    <!-- Jquery, Jquery UI -->
    <link rel="stylesheet" href="{% static 'css/jquery/ui/1.12.1/jquery-ui.css' %}">

    <!-- Datatable Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/bootstrap/datatables/1.10.19/dataTables.bootstrap4.min.css' %}">
    <!-- <link rel="stylesheet" href="{% static 'css/bootstrap/datatables/4.1.3/bootstrap.css' %}"> -->

    <!-- include the style -->
    <link rel="stylesheet" href="{% static 'css/alertifyjs/alertify.min.css' %} "/>
    
    <!-- include a theme -->
    <link rel="stylesheet" href="{% static 'css/alertifyjs/themes/default.min.css' %} "/>

    <!-- Font Awesome Icons -->
    <script src="https://kit.fontawesome.com/{{fontawesome_key}}.js"></script>

    <!-- Google Maps -->
    <style media="screen">
      #gmap_canvas img{
        max-width:none !important;
        background:none!important
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ api_key }}" async defer></script>
  </head>
  <body onload="load_map({{defaultLat}},{{defaultLng}})">

    <div class="container">
      <div class="modal fade" id="placeShowModal" role="dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title"><b>Add a New Place:</h4></b> 
            </div>
            <div class="modal-body">
              <form method="post">
              {% csrf_token %}
                <fieldset>
                  <div class="form-group"><b>Name:</b>
                    <input class="form-control" type="text" id="placeName" value="" autofocus="" required="">
                  </div>
                  <div class="form-group"><b>Latitude:</b>
                    <input class="form-control" id="latitude" value="" readonly="">
                  </div>
                  <div class="form-group"><b>Length:</b>
                    <input class="form-control" id="length" value="" readonly="">
                  </div>
                  <div class="form-group"><b>Country:</b>
                    <input class="form-control" id="country" value="" type="text" readonly="">
                  </div>
                  <div class="form-group"><b>Country Code:</b>
                    <input class="form-control" id="countryCode" value="" type="text" readonly="">
                  </div>
                  <div class="form-group"><b>City:</b>
                    <input class="form-control" id="city" value="" type="text" readonly="">
                  </div>
                  <div class="modal-footer">
                    <input class="btn btn-success" type="submit" onclick='addSpot({{defaultLat}},{{defaultLng}})' value="Guardar" />
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  

    <div id="tabs">
      <ul>
        <li><a href="#tabs-1">GoogleMaps</a></li>
        <li><a href="#tabs-2">My Spot List</a></li>
      </ul>
      <div id="tabs-1">
          <p>Basic example of how to use Google Maps API</p>
          <div class="container">
            <div id='gmap_canvas' style='height:350px;width:100%;'></div><br>
            <div class="btn-group">
              <button type="submit" class="btn btn-primary" data-toggle="modal" onclick='get_place_information({{defaultLat}},{{defaultLng}})' data-target="#placeShowModal"><i class="fa fa-map-marker" title="Add Place" aria-hidden="true"></i> Add Place</button>
            </div>
            <div class="btn-group">            
              <button type="submit" class="btn btn-info" data-toggle="modal" data-target="#placeNearBy"><i class="fas fa-location-arrow" title="Show me Nearby Places" aria-hidden="true"></i> Show me Nearby Places</button>
            </div>
          </div>
      </div>
      <div id="tabs-2">
        <table id="spotTable" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>Id</th>              
                <th>Name</th>
                <th>Lat</th>
                <th>Long</th>
                <th>Country</th>
                <th>City</th>
                <th>Edit</th>
                <th>Delete</th>                
            </tr>
        </thead>
        <tbody>
            {% for key in data %}
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{ key.name }}</td>
                <td>{{ key.lat }}</td>
                <td>{{ key.lng }}</td>
                <td>{{ key.country }}</td>
                <td>{{ key.city }}</td>
                <td>
                  <center><button type="submit" style="background-color:#f5f5f5;" name="search" class="btn btn-flat" ><i id="edit{{key.id}}" onclick='edit({{value.id}})' class="far fa-edit"></i></button></center>
                </td>
                <td>
                  <center><button type="submit" style="background-color:#f5f5f5;" name="search" class="btn btn-flat" ><i id="remover{{key.id}}" onclick='remove({{value.id}})' class="far fa-trash-alt"></i></button></center>
                </td>
            </tr>
            {% endfor %}
        <tbody>
        </table>

      </div>
    </div>

  </body>
</html>

  <!-- Custom Functions for Google Maps -->
  <script src="{% static 'js/custom/app.js' %}" charset="utf-8"></script>

  <!-- Jquery, Jquery UI -->
  <script src="{% static 'js/jquery/jquery-1.12.4.js' %}"></script>
  <script src="{% static 'js/jquery/ui/1.12.1/jquery-ui.js' %}"></script>
  <script>
    $( "#tabs" ).tabs();
  </script>

  <!-- Bootstrap -->
  <script src="{% static 'js/bootstrap/3.4.1/jquery.min.js' %}"></script>
  <script src="{% static 'js/bootstrap/3.4.0/bootstrap.min.js' %}"></script>

  <!-- Bootstrap Datatable -->
  <script src="{% static 'js/bootstrap/datatables/jquery-3.3.1.js' %}"></script>
  <script src="{% static 'js/bootstrap/datatables/1.10.19/jquery.dataTables.min.js' %}"></script>
  <script src="{% static 'js/bootstrap/datatables/1.10.19/dataTables.bootstrap4.min.js' %}"></script>
  <script>
  $(document).ready(function() {
      $('#spotTable').DataTable();
  } );
  </script>

  <script src="{% static 'js/alertifyjs/alertify.min.js' %}"></script>
